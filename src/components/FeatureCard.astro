---
import Tilt from "react-parallax-tilt";
import { Icon } from "@astrojs/starlight/components";

export interface Props {
  title: string;
  body?: string;
  icon?: string;
}

const { icon, title, body } = Astro.props;
---

<div class="feature-card">
  <Tilt
    client:idle
    className="feature-card-inner"
    glareEnable={true}
    glareMaxOpacity={0.8}
    glareColor="var(--sl-color-gray-3)"
    glarePosition="left"
    glareBorderRadius="0.5rem"
    gyroscope={true}
    transitionSpeed={2000}
    tiltMaxAngleX={6}
    tiltMaxAngleY={6}
    tiltReverse={true}
    style="display: block; width: 100%; height: 100%;"
  >
    <article
      class="card"
    >
      <h4 class="title font-bold gap-4 items-center">
        <!-- @ts-ignore -->
        {icon && <Icon name={icon} class="icon" size="1.333em" />}
        <span set:html={title} />
      </h4>
      <div class="body">
        {body}
      </div>
    </article>
  </Tilt>
</div>

<style>
  .feature-card {
    width: 100%;
    height: 100%;
  }

  .card {
    display: flex;
    flex-direction: column;
    height: 100%;
    border: 1px solid var(--sl-color-gray-5);
    border-radius: 0.5rem;
    background: color-mix(in lab, transparent 70%, var(--sl-color-black));
    backdrop-filter: blur(16px);
    padding: clamp(1rem, calc(0.125rem + 3vw), 2.5rem);
    gap: clamp(0.5rem, calc(0.125rem + 1vw), 1rem);
  }

  .title {
    color: var(--sl-color-white);
    line-height: var(--sl-line-height-headings);
  }

  :global([data-theme="light"]) .card .title {
    color: var(--sl-color-black);
  }

  :global([data-theme="light"]) .card .body {
    color: var(--sl-color-gray-2);
  }

  .card .icon {
    border: 1px solid var(--sl-card-border);
    background-color: var(--sl-card-bg);
    padding: 0.2em;
    border-radius: 0.25rem;
  }

  .card .body {
    margin: 0;
    font-size: clamp(
      var(--sl-text-sm),
      calc(0.5rem + 1vw),
      var(--sl-text-body)
    );
  }
</style>
